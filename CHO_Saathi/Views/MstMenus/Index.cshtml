@model IEnumerable<CHO_Saathi.ViewModels.MenuViewModel>

@{
    ViewData["Title"] = "Menu Master";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    div.dt-container .dt-search input {
        margin-bottom: 5px;
    }

    .dt-search {
        float: right;
    }

    .dt-paging {
        float: right;
        margin-top: 10px;
    }

    button.dt-button, div.dt-button, a.dt-button {
        position: relative;
        display: inline-block;
        box-sizing: border-box;
        margin-right: 0.333em;
        padding: 0.5em 1em;
        border: 1px solid #999;
        border-radius: 2px;
        cursor: pointer;
        font-size: 0.88em;
        color: black;
        background-color: #e9e9e9;
        background-image: linear-gradient(to bottom, #fff 0%, #e9e9e9 100%);
        user-select: none;
        text-decoration: none;
        outline: none;
    }

    div.dt-buttons {
        position: relative;
        float: left;
    }

    .edicon {
        font-size: 16px;
        cursor: pointer;
    }
</style>


<div class="card">
    <div class="card-body">
        <div class="container-fluid mt-2">
            <div class="row">
                <div class="col-xl-6 col-lg-6">
                    <div class="pagetitle">
                        <h1>Menu Master</h1>
                    </div>
                </div>
                <div class="col-xl-6 col-lg-6">
                    <div class="float-end">
                        <a asp-action="Create" class="btn btn-primary">
                            <i class="fa-solid fa-plus"></i>&nbsp;Add Menu
                        </a>
                    </div>
                </div>
               
            </div>
            <div class="row">
                <div class="col-xl-12 col-lg-12">
                   <hr />
                </div>
            </div>
            <div class="row">
                <div class=" col-xl-4">
                    <label>Parent Menu</label>
                    <select id="ParentMenuDropdown" class="form-control"
                            asp-items="@(ViewBag.ParentMenus as List<SelectListItem>)">
                        <option value="">All</option>
                    </select>
                </div>
            </div>
            <div class="row">
                <div class="col-xl-12 col-lg-12">
                    <table id="MenuDetails" class="table table-striped table-bordered cell-border nowrap">
                        <thead>
                            <tr>
                                <th style="width:5%;">S.No.</th>
                                <th>Menu</th>
                                <th>Parent Menu</th>
                                <th>Controller</th>
                                <th>Action</th>
                                <th>Style Class</th>
                                <th>Icon</th>
                                <th style="width:10%;">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            @{
                                int sn = 1;
                                foreach (var item in Model)
                                {
                                    <tr>
                                        <td>@sn</td>
                                        <td class="@(item.MenuParentId == 0 ? "fw-bold" : "")">
                                            @item.Menu
                                        </td>
                                        <td>@item.ParentMenuName</td>
                                        <td>@item.Controller</td>
                                        <td>@item.Action</td>
                                        <td>@item.StyleClass</td>
                                        <td align="center"><span class="text-center"><i class="@item.StyleClass text-primary"></i></span></td>
                                        
                                        <td>
                                            <a asp-action="Edit" asp-route-id="@item.MenuId"
                                               class="text-success edicon" title="Edit">
                                                <i class="fa-solid fa-pen-to-square"></i>
                                            </a>
                                            &nbsp;
                                            <a asp-action="Delete" asp-route-id="@item.MenuId"
                                               class="text-danger edicon" title="Delete">
                                                <i class="fa-solid fa-trash"></i>
                                            </a>
                                        </td>
                                    </tr>
                                    sn++;
                                }
                            }
                        </tbody>


                    </table>
                </div>
            </div>
        </div>
    </div>
</div>


<script type="text/javascript">
    $(document).ready(function () {
        $('#MenuDetails').DataTable({
            dom: 'lBfrtip',
            buttons: [],
            info: false,
            autoWidth: false,
            paging: true,
            searching: true,
            lengthChange: false,
            pageLength: 10
        });
    });

        $(document).ready(function () {
        $('#ParentMenuDropdown').change(function () {
            var parentId = $(this).val();
            var url = '@Url.Action("Index", "MstMenus")';
            if (parentId) {
                window.location.href = url + '?parentId=' + parentId;
            } else {
                window.location.href = url;
            }
        });
    });
</script>

<script>
    $(document).ready(function () {
        var alertType = '@TempData["AlertType"]';
        var alertMessage = '@TempData["AlertMessage"]';

        if (alertType && alertMessage) {
            showAlert(alertType, '', alertMessage, '');
        }
    });
</script>
 
