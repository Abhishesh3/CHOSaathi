<!DOCTYPE html>
<html lang="en">
<!--begin::Head-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>@ViewBag.Title</title>
    <!--begin::Accessibility Meta Tags-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
    <link href="~/assets/img/Cho_Logoss.png" rel="icon">
    <link href="~/assets/img/Cho_Logoss.png" rel="apple-touch-icon">
    <link rel="preload" href="~/css/adminlte.css" as="style" />
    <link href="~/assets/css/f-modal.css" rel="stylesheet" />
    
    <!--end::Accessibility Features-->
    <!--begin::Fonts-->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/@@fontsource/source-sans-3@5.0.12/index.css"
          integrity="sha256-tXJfXfp6Ewt1ilPzLDtQnJV4hclT9XuaZUKyUvmyr+Q="
          crossorigin="anonymous"
          media="print"
          onload="this.media='all'" />
    <!--end::Fonts-->
    <!--begin::Third Party Plugin(OverlayScrollbars)-->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.11.0/styles/overlayscrollbars.min.css"
          crossorigin="anonymous" />
    <!--end::Third Party Plugin(OverlayScrollbars)-->
    <!--begin::Third Party Plugin(Bootstrap Icons)-->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css"
          crossorigin="anonymous" />
    <!--end::Third Party Plugin(Bootstrap Icons)-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha512-DxV+EoADOkOygM4IR9yXP8Sb2qwgidEmeqAEmDKIOfPRQZOWbXCzLC6vjbZyy0vPisbH2SyW27+ddLVCN+OMzQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link href="~/datatables/datatables.min.css" rel="stylesheet" />
    <link href="~/css/chostylesheet.css" rel="stylesheet" />
    <!-- JS Tree CSS -->
    <link href="~/assets/vendor/jstree/themes/default/style.min.css" rel="stylesheet" />

    <!--begin::Required Plugin(AdminLTE)-->
    <link rel="stylesheet" href="~/css/adminlte.css" />
    <!--end::Required Plugin(AdminLTE)-->
    <script src="~/js/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

 
   
    <style>
        .header-text {
            color: #4037a5;
            font-weight: 600;
           
        }
        .Subheader-text {
            color: #333;
            font-weight: 600;
        }
        /* Admin Button */
        .admin-btn {
            background: #ff9449;
            border-radius: 20px;
            padding: 0.5rem 1.2rem !important;
        }
    </style>
</head>
<!--end::Head-->
<!--begin::Body-->
<body class="layout-navbar-fixed">
    <partial name="_LoadingPanel" />

    <div class="container-fluid" style="background:#fff;">
        <div class="row">
            <div class="col-xl-3">
                <img src="~/assets/img/Cho_Logoss.png" alt="AdminLTE Logo" class="img-fluid rounded-circle" style="width:20%;"/>
            </div>
            <div class="col-xl-6">
                <div class="header-text text-center mt-3">
                    <h4> National Health Mission, Odisha</h4>
                </div>
                <div class="Subheader-text text-center">
                    <h6>CHO Saathi Dashboard</h6>
                </div>
                
            </div>
            <div class="col-xl-3">
                <img src="~/assets/img/ChoGroupLogo2x.png" class="img-fluid float-end" style="width:50%;margin-top:6px;" />
            </div>
        </div>
    </div>
    <!--begin::App Wrapper-->
    <div>
        <!-- NAVBAR -->
        <nav class="navbar navbar-expand-lg iwin-navbar">
            <div class="container-fluid">
                <!-- Logo -->
                <!-- Toggle -->
                <button class="navbar-toggler text-white" type="button" data-bs-toggle="collapse" data-bs-target="#iwinNavbar">
                    <i class="fas fa-bars"></i>
                </button>

                <!-- Menu -->
                <div class="collapse navbar-collapse" id="iwinNavbar">
                    <!-- Left Menu -->
                    @await Component.InvokeAsync("RenderMenu")
                    <!-- Right Admin -->
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle admin-btn" data-bs-toggle="dropdown">
                                <i class="fas fa-user-circle me-1"></i>&nbsp;@Context.Session.GetString("Name")
                            </a>
                            <ul class="dropdown-menu dropdown-menu-end">
                                <li>
                                    <a href="@Url.Action("Logout", "Login")"  class="dropdown-item fw-semibold">
                                        <i class="fas fa-sign-out-alt me-1"></i> Logout
                                    </a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
          
        <main class="app-main">
            @RenderBody()
        </main>
        <!--end::App Main-->
        <!--begin::Footer-->
        <footer class="app-footer">
            <!--begin::Copyright-->
            <strong>
                Copyright &copy; @DateTime.Now.Year - CHO Saathi, All Rights Reserved.
            </strong>
            All rights reserved.
            <!--end::Copyright-->
            <!--begin::To the end-->
            <div class="float-end d-none d-sm-inline">
              
            </div>
            <!--end::To the end-->
        </footer>
        <!--end::Footer-->
    </div>
    <!--end::App Wrapper-->
    <!--begin::Script-->
    <!-- Modal -->
    <div class="modal fade" id="staticBackdrop_Session" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdrop_SessionLabel" aria-hidden="true">
        <div class="modal-dialog modal-sm">
            <div class="modal-content modal-filled bg-warning">
                <div class="modal-body p-4">
                    <div class="text-center">
                        <i class="dripicons-wrong h1 text-white"></i>
                        <h4 class="mt-2">
                            Alert !!
                        </h4>
                        <p class="mt-2">
                            Your session will expire within <br /> <span id="lbltimeOut" class="h3"></span> <br /> Please click OK to continue the session.
                        </p>
                        <a class="btn btn-success btn-sm" style="cursor:pointer" onclick="ExtentSessionMethod();">
                            Ok &nbsp; <i class="fa-solid fa-thumbs-up"></i>
                        </a>
                        <a class="btn btn-danger btn-sm" style="cursor:pointer" title="Click here to Logout" href="@Url.Action("Logout", "Login")">
                            <i class="fa-solid fa-right-from-bracket"></i>&nbsp;Logout
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="alert-container" class="alert-top-center"></div>


    <!--begin::Third Party Plugin(OverlayScrollbars)-->
    <script src="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.11.0/browser/overlayscrollbars.browser.es6.min.js"
            crossorigin="anonymous"></script>
    <!--end::Third Party Plugin(OverlayScrollbars)--><!--begin::Required Plugin(popperjs for Bootstrap 5)-->
    <script src="https://cdn.jsdelivr.net/npm/@@popperjs/core@2.11.8/dist/umd/popper.min.js"
            crossorigin="anonymous"></script>
    <!--end::Required Plugin(popperjs for Bootstrap 5)--><!--begin::Required Plugin(Bootstrap 5)-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.min.js"
            crossorigin="anonymous"></script>
    <!--end::Required Plugin(Bootstrap 5)--><!--begin::Required Plugin(AdminLTE)-->
    <script src="~/datatables/datatables.min.js"></script>
    
    <script src="~/js/adminlte.js"></script>
    <!--end::Required Plugin(AdminLTE)--><!--begin::OverlayScrollbars Configure-->
    @await RenderSectionAsync("Scripts", required: false)

    <script type="text/javascript">
        var sessionTimeoutWarning = 20; // total session minutes
        var sTimeout = sessionTimeoutWarning * 60 * 1000;
        var warningTimer, countdownTimer;
        var sessionModal;

        function startSessionTimeout() {
            clearTimeout(warningTimer);
            clearInterval(countdownTimer);

            warningTimer = setTimeout(SessionEnd, sTimeout - 300000); // 5 min before
        }

        function SessionEnd() {
            var countDownDate = new Date().getTime() + (5 * 60000);

            countdownTimer = setInterval(function () {
                var now = new Date().getTime();
                var distance = countDownDate - now;

                var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                var seconds = Math.floor((distance % (1000 * 60)) / 1000);

                document.getElementById("lbltimeOut").innerText =
                    minutes + "M : " + seconds + "S";

                if (distance < 30000) {
                    clearInterval(countdownTimer);
                    window.location.href = '@Url.Action("Login", "Login")';
                }
            }, 1000);

            var modalEl = document.getElementById('staticBackdrop_Session');
            sessionModal = new bootstrap.Modal(modalEl, {
                backdrop: 'static',
                keyboard: false
            });

            sessionModal.show();
        }

        function ExtentSessionMethod() {
            if (sessionModal) {
                sessionModal.hide();
            }
            startSessionTimeout();
        }

        startSessionTimeout();
    </script>



    <script type="text/javascript">
        function preventBack() { window.history.forward(); }
        setTimeout("preventBack()", 0);
        window.onunload = function () { null };
    </script>

    <script type="text/javascript">
            // Make showAlert globally available
            function showAlert(severity, summary, midMessage, details, extraElements = '') {
            const alertContainer = document.getElementById("alert-container");
            if (!alertContainer) return;

            const iconMap = {
                success: "✅",
                danger: "❌",
                warning: "⚠️",
                info: "ℹ️"
            };

            const icon = iconMap[severity] || "ℹ️";
            const severityClass = "alert-" + (iconMap[severity] ? severity : "info");

            const alertBox = document.createElement("div");
            alertBox.classList.add("alert-box", severityClass);

            alertBox.innerHTML = `
                <div style="font-size: 24px; margin-right: 12px;">${icon}</div>
                <div style="flex-grow: 1;">
                    <div style="font-weight: bold; font-size: 16px; color: #333;">${summary}</div>
                    <div style="margin: 6px 0; font-size: 15px; color: #555;">${midMessage || ""}</div>
                    <div style="margin-top: 4px; font-size: 14px; color: #444;">${details}</div>
                    ${extraElements}
                </div>
                <button onclick="this.closest('.alert-box').remove()"
                    style="border: none; background: transparent; font-size: 18px; color: #444; margin-left: 10px; cursor: pointer;">
                    ✖
                </button>
            `;

            alertContainer.appendChild(alertBox);

            setTimeout(() => {
                alertBox.style.opacity = '0';
                alertBox.style.transform = 'translateY(-10px)';
                setTimeout(() => alertBox.remove(), 400);
            }, 5000);
        }
    </script>

    <script>
        const SELECTOR_SIDEBAR_WRAPPER = '.sidebar-wrapper';
        const Default = {
          scrollbarTheme: 'os-theme-light',
          scrollbarAutoHide: 'leave',
          scrollbarClickScroll: true,
        };
        document.addEventListener('DOMContentLoaded', function () {
          const sidebarWrapper = document.querySelector(SELECTOR_SIDEBAR_WRAPPER);
          if (sidebarWrapper && OverlayScrollbarsGlobal?.OverlayScrollbars !== undefined) {
            OverlayScrollbarsGlobal.OverlayScrollbars(sidebarWrapper, {
              scrollbars: {
                theme: Default.scrollbarTheme,
                autoHide: Default.scrollbarAutoHide,
                clickScroll: Default.scrollbarClickScroll,
              },
            });
          }
        });
    </script>
    <!--end::OverlayScrollbars Configure--><!-- Image path runtime fix -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
          // Find the link tag for the main AdminLTE CSS file.
          const cssLink = document.querySelector('link[href*="css/adminlte.css"]');
          if (!cssLink) {
            return; // Exit if the link isn't found
          }

          // Extract the base path from the CSS href.
          // e.g., from "~/css/adminlte.css", we get "~/"
          // e.g., from "./css/adminlte.css", we get "./"
          const cssHref = cssLink.getAttribute('href');
          const deploymentPath = cssHref.slice(0, cssHref.indexOf('css/adminlte.css'));

          // Find all images with absolute paths and fix them.
          document.querySelectorAll('img[src^="/assets/"]').forEach((img) => {
            const originalSrc = img.getAttribute('src');
            if (originalSrc) {
              const relativeSrc = originalSrc.slice(1); // Remove leading '/'
              img.src = deploymentPath + relativeSrc;
            }
          });
        });
    </script>
    @* <script type="text/javascript">
        const displayTime = document.querySelector(".display-time");
        // Time
        function showTime() {
            let time = new Date();
            displayTime.innerText = time.toLocaleTimeString("en-US", { hour12: false });
            setTimeout(showTime, 1000);
        }

        showTime();

        // Date
        function updateDate() {
            let today = new Date();

            // return number
            let dayName = today.getDay(),
                dayNum = today.getDate(),
                month = today.getMonth(),
                year = today.getFullYear();

            const months = [
                "January",
                "February",
                "March",
                "April",
                "May",
                "June",
                "July",
                "August",
                "September",
                "October",
                "November",
                "December",
            ];
            const dayWeek = [
                "Sunday",
                "Monday",
                "Tuesday",
                "Wednesday",
                "Thursday",
                "Friday",
                "Saturday",
            ];
            // value -> ID of the html element
            const IDCollection = ["day", "daynum", "month", "year"];
            // return value array with number as a index
            const val = [dayWeek[dayName], dayNum, months[month], year];
            for (let i = 0; i < IDCollection.length; i++) {
                document.getElementById(IDCollection[i]).firstChild.nodeValue = val[i];
            }
        }

        updateDate();
    </script> *@
    <!--end::Script-->
    <script src="~/js/ajax.js"></script>
</body>
<!--end::Body-->
</html>